/*
 * Ampairs Material Design 3 System
 * Modern theming with M3 color tokens, typography, and density support
 */

// Angular Material core
@use '@angular/material' as mat;

// Import M3 theme system
@use 'app/shared/styles/theme-m3' as m3;

// Include Material core (M3 compatible)
@include mat.core();

// ================================
// Material 3 Theme Application
// ================================

// Apply M3 light theme as default
@include mat.all-component-themes(m3.$ampairs-light-theme);

// ================================
// Material 3 Theme Classes
// ================================

.light-theme {
  @include mat.all-component-colors(m3.$ampairs-light-theme);

  // M3 Design Tokens for light theme
  --primary-color: var(--app-light-primary);
  --primary-container-color: var(--app-light-primary-container);
  --on-primary-color: var(--app-light-on-primary);
  --on-primary-container-color: var(--app-light-on-primary-container);
  
  --secondary-color: var(--app-light-secondary);
  --secondary-container-color: var(--app-light-secondary-container);
  --on-secondary-color: var(--app-light-on-secondary);
  --on-secondary-container-color: var(--app-light-on-secondary-container);
  
  --tertiary-color: var(--app-light-tertiary);
  --tertiary-container-color: var(--app-light-tertiary-container);
  --on-tertiary-color: var(--app-light-on-tertiary);
  --on-tertiary-container-color: var(--app-light-on-tertiary-container);
  
  --surface-color: var(--app-light-surface);
  --surface-container-color: var(--app-light-surface-container);
  --surface-container-low-color: var(--app-light-surface-container-low);
  --surface-container-high-color: var(--app-light-surface-container-high);
  --surface-container-highest-color: var(--app-light-surface-container-highest);
  --on-surface-color: var(--app-light-on-surface);
  --on-surface-variant-color: var(--app-light-on-surface-variant);
  
  --background-color: var(--app-light-background);
  --on-background-color: var(--app-light-on-background);
  
  --error-color: var(--app-light-error);
  --error-container-color: var(--app-light-error-container);
  --on-error-color: var(--app-light-on-error);
  --on-error-container-color: var(--app-light-on-error-container);
  
  --outline-color: var(--app-light-outline);
  --outline-variant-color: var(--app-light-outline-variant);

  // Legacy compatibility
  --accent-color: var(--app-light-secondary);
  --warn-color: var(--app-light-error);
  --success-color: var(--app-light-tertiary);
  --warning-color: #ff9800;
  --info-color: #2196f3;
  --text-color: var(--app-light-on-background);
  --text-secondary-color: var(--app-light-on-surface-variant);
  --text-disabled-color: color-mix(in srgb, var(--app-light-on-surface) 38%, transparent);
  --text-hint-color: color-mix(in srgb, var(--app-light-on-surface) 60%, transparent);
  --border-color: var(--app-light-outline-variant);
  --divider-color: var(--app-light-outline-variant);
  --disabled-color: var(--app-light-surface-container);
  
  // M3 Elevation shadows
  --shadow-1: 0 1px 2px color-mix(in srgb, var(--app-light-on-surface) 30%, transparent), 0 1px 3px 1px color-mix(in srgb, var(--app-light-on-surface) 15%, transparent);
  --shadow-2: 0 1px 2px color-mix(in srgb, var(--app-light-on-surface) 30%, transparent), 0 2px 6px 2px color-mix(in srgb, var(--app-light-on-surface) 15%, transparent);
  --shadow-3: 0 4px 8px 3px color-mix(in srgb, var(--app-light-on-surface) 15%, transparent), 0 1px 3px color-mix(in srgb, var(--app-light-on-surface) 30%, transparent);
  --shadow-4: 0 6px 10px 4px color-mix(in srgb, var(--app-light-on-surface) 15%, transparent), 0 2px 3px color-mix(in srgb, var(--app-light-on-surface) 30%, transparent);
}

.dark-theme {
  @include mat.all-component-colors(m3.$ampairs-dark-theme);

  // M3 Design Tokens for dark theme
  --primary-color: var(--app-dark-primary);
  --primary-container-color: var(--app-dark-primary-container);
  --on-primary-color: var(--app-dark-on-primary);
  --on-primary-container-color: var(--app-dark-on-primary-container);
  
  --secondary-color: var(--app-dark-secondary);
  --secondary-container-color: var(--app-dark-secondary-container);
  --on-secondary-color: var(--app-dark-on-secondary);
  --on-secondary-container-color: var(--app-dark-on-secondary-container);
  
  --tertiary-color: var(--app-dark-tertiary);
  --tertiary-container-color: var(--app-dark-tertiary-container);
  --on-tertiary-color: var(--app-dark-on-tertiary);
  --on-tertiary-container-color: var(--app-dark-on-tertiary-container);
  
  --surface-color: var(--app-dark-surface);
  --surface-container-color: var(--app-dark-surface-container);
  --surface-container-low-color: var(--app-dark-surface-container-low);
  --surface-container-high-color: var(--app-dark-surface-container-high);
  --surface-container-highest-color: var(--app-dark-surface-container-highest);
  --on-surface-color: var(--app-dark-on-surface);
  --on-surface-variant-color: var(--app-dark-on-surface-variant);
  
  --background-color: var(--app-dark-background);
  --on-background-color: var(--app-dark-on-background);
  
  --error-color: var(--app-dark-error);
  --error-container-color: var(--app-dark-error-container);
  --on-error-color: var(--app-dark-on-error);
  --on-error-container-color: var(--app-dark-on-error-container);
  
  --outline-color: var(--app-dark-outline);
  --outline-variant-color: var(--app-dark-outline-variant);

  // Legacy compatibility
  --accent-color: var(--app-dark-secondary);
  --warn-color: var(--app-dark-error);
  --success-color: var(--app-dark-tertiary);
  --warning-color: #ff9800;
  --info-color: #2196f3;
  --text-color: var(--app-dark-on-background);
  --text-secondary-color: var(--app-dark-on-surface-variant);
  --text-disabled-color: color-mix(in srgb, var(--app-dark-on-surface) 38%, transparent);
  --text-hint-color: color-mix(in srgb, var(--app-dark-on-surface) 60%, transparent);
  --border-color: var(--app-dark-outline-variant);
  --divider-color: var(--app-dark-outline-variant);
  --disabled-color: var(--app-dark-surface-container);
  
  // M3 Elevation shadows for dark theme
  --shadow-1: 0 1px 2px color-mix(in srgb, black 30%, transparent), 0 1px 3px 1px color-mix(in srgb, black 15%, transparent);
  --shadow-2: 0 1px 2px color-mix(in srgb, black 30%, transparent), 0 2px 6px 2px color-mix(in srgb, black 15%, transparent);
  --shadow-3: 0 4px 8px 3px color-mix(in srgb, black 15%, transparent), 0 1px 3px color-mix(in srgb, black 30%, transparent);
  --shadow-4: 0 6px 10px 4px color-mix(in srgb, black 15%, transparent), 0 2px 3px color-mix(in srgb, black 30%, transparent);
}


// ================================
// Base Styles
// ================================

html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  font-family: var(--font-family, 'Roboto', 'Helvetica Neue', sans-serif), serif;
  font-size: var(--font-size-medium, 14px);
}

body {
  background-color: var(--background-color);
  color: var(--text-color);
  line-height: 1.6;
  // M3 typography is handled by the theme system
}

// ================================
// Material 3 Design System
// ================================

// ================================
// Material 3 Dynamic Density Classes
// ================================

// M3 Density classes for runtime theme switching
.mat-density--5 { 
  @include mat.all-component-themes(mat.define-theme((
    density: (scale: -5)
  )));
}
.mat-density--4 { 
  @include mat.all-component-themes(mat.define-theme((
    density: (scale: -4)
  )));
}
.mat-density--3 { 
  @include mat.all-component-themes(mat.define-theme((
    density: (scale: -3)
  )));
}
.mat-density--2 { 
  @include mat.all-component-themes(mat.define-theme((
    density: (scale: -2)
  )));
}
.mat-density--1 { 
  @include mat.all-component-themes(mat.define-theme((
    density: (scale: -1)
  )));
}
.mat-density-0 { 
  @include mat.all-component-themes(mat.define-theme((
    density: (scale: 0)
  )));
}

// Theme-aware snackbar variants (using design tokens)
.success-snackbar {
  --mdc-snackbar-container-color: var(--success-color);
  --mdc-snackbar-supporting-text-color: #ffffff;
  --mat-snack-bar-button-color: #ffffff;
}

.error-snackbar {
  --mdc-snackbar-container-color: var(--warn-color);
  --mdc-snackbar-supporting-text-color: #ffffff;
  --mat-snack-bar-button-color: #ffffff;
}

.warning-snackbar {
  --mdc-snackbar-container-color: var(--warning-color);
  --mdc-snackbar-supporting-text-color: #ffffff;
  --mat-snack-bar-button-color: #ffffff;
}

.info-snackbar {
  --mdc-snackbar-container-color: var(--info-color);
  --mdc-snackbar-supporting-text-color: #ffffff;
  --mat-snack-bar-button-color: #ffffff;
}

// ================================
// Utility Classes
// ================================

// Color utilities
.text-primary {
  color: var(--primary-color);
}

.text-accent {
  color: var(--accent-color);
}

.text-warn {
  color: var(--warn-color);
}

.text-success {
  color: var(--success-color);
}

.text-warning {
  color: var(--warning-color);
}

.text-info {
  color: var(--info-color);
}

.text-secondary {
  color: var(--text-secondary-color);
}

.text-disabled {
  color: var(--text-disabled-color);
}

.bg-primary {
  background-color: var(--primary-color);
}

.bg-accent {
  background-color: var(--accent-color);
}

.bg-surface {
  background-color: var(--surface-color);
}

.bg-background {
  background-color: var(--background-color);
}

// Layout utilities
.full-width {
  width: 100%;
}

.full-height {
  height: 100%;
}

.flex {
  display: flex;
}

.flex-column {
  flex-direction: column;
}

.flex-row {
  flex-direction: row;
}

.flex-wrap {
  flex-wrap: wrap;
}

.justify-start {
  justify-content: flex-start;
}

.justify-center {
  justify-content: center;
}

.justify-end {
  justify-content: flex-end;
}

.justify-between {
  justify-content: space-between;
}

.justify-around {
  justify-content: space-around;
}

.items-start {
  align-items: flex-start;
}

.items-center {
  align-items: center;
}

.items-end {
  align-items: flex-end;
}

.items-stretch {
  align-items: stretch;
}

.self-start {
  align-self: flex-start;
}

.self-center {
  align-self: center;
}

.self-end {
  align-self: flex-end;
}

// Text alignment
.text-left {
  text-align: left;
}

.text-center {
  text-align: center;
}

.text-right {
  text-align: right;
}

.text-justify {
  text-align: justify;
}

// Border radius utilities
.rounded-none {
  border-radius: 0;
}

.rounded-sm {
  border-radius: 4px;
}

.rounded {
  border-radius: 8px;
}

.rounded-lg {
  border-radius: 12px;
}

.rounded-xl {
  border-radius: 16px;
}

.rounded-full {
  border-radius: 9999px;
}

// Shadow utilities
.shadow-none {
  box-shadow: none;
}

.shadow-sm {
  box-shadow: var(--shadow-1);
}

.shadow {
  box-shadow: var(--shadow-2);
}

.shadow-md {
  box-shadow: var(--shadow-3);
}

.shadow-lg {
  box-shadow: var(--shadow-4);
}

// ================================
// Animations
// ================================

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(24px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInDown {
  from {
    opacity: 0;
    transform: translateY(-24px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out;
}

.animate-slide-in-up {
  animation: slideInUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-slide-in-down {
  animation: slideInDown 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-scale-in {
  animation: scaleIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

// ================================
// Responsive Design
// ================================

// Mobile-first responsive utilities
@media (min-width: 600px) {
  .sm\:flex {
    display: flex;
  }
  .sm\:hidden {
    display: none;
  }
  .sm\:block {
    display: block;
  }
}

@media (min-width: 960px) {
  .md\:flex {
    display: flex;
  }
  .md\:hidden {
    display: none;
  }
  .md\:block {
    display: block;
  }
}

@media (min-width: 1280px) {
  .lg\:flex {
    display: flex;
  }
  .lg\:hidden {
    display: none;
  }
  .lg\:block {
    display: block;
  }
}

// Hide on mobile
@media (max-width: 599px) {
  .hide-on-mobile {
    display: none;
  }
}

// Hide on desktop
@media (min-width: 960px) {
  .hide-on-desktop {
    display: none;
  }
}

// Reduced motion support
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
